# 开发记录

## 2021.10.22

* 今天是第一次写开发记录。仔细想想，真的应该早点养成这个习惯。有太多灵光一现的想法，第二天起来可能就忘了。记录是个自我提升和总结的好方法。
* 今天完成的事情
    * 把enum全部剔除了，统一使用了**as const**的写法，确实很香
    * 把原来使用provide/inject的AppContext统一换成了vueuse的[createGlobalState](https://vueuse.org/shared/createglobalstate/#createglobalstate), 工作量挺大，项目里使用AppContext的地方确实不少了。**createGlobalState**我主要抽离成了两部分，一部分是demo里需要和local相辅的，还有一部分就是memory里的，不会体现在local里
    * 实在是等不及**auto-import**的type自动引入，自己手写了一些vue/vue-router以及一部分自定义常用的类型，以后再也不用引入常用的类型了
    * 把menu/route的逻辑整体抽出到core文件夹下了，要不store里一部分逻辑，router里一部分逻辑很乱，**明天准备把tab的逻辑也抽离出来**，工作量也不小
    * App 文件夹整体优化了，减少文件数量，结构清晰一些
    * 最后的一些scss代码删除了，项目里原来6+1模式的scss的文件夹结构在windicss面前，十分无用
    * 抽离了n-drawer做出了w-drawer，最主要是默认的底部按钮和drawer头部尾部的固定样式，**后续要把form里的高级表单内的drawer替换一下**
* 想法
    * 每天都在优化，每天都在重构，确实比较耗时，但我相信最后做出的代码质量应该不会差，打好基础，才能继续开发，这种中后台的架子，基础很重要
    * vueuse里还是有很多hook可以用在框架里，可以做很多features
    * 国际化需要做一套后台支持的模式，会比较麻烦，暂时没想好怎么设计
    * 做了**AppSettings**的组件架子，里面还没写配置项目。这个配置项，我觉得主要有两部分，一部分是面向user的，一部分的面向developer的，需要分清楚。
    * icon 方案还没决定是否采用**unplugin-icon**
    * 类型优化和设计，是一条永远都走不完的路，这工作量比js的项目得多了一倍（一心一意想做好得话），所有的函数变量我都会写类型，有时就会遇到比较棘手的类型，卡半天，效率就变慢了
    * 我的ts还是很弱，如果我能提升一下ts的进阶知识，获取一些类型的设计上思路都会不同
    * 权限部分一点没开始，前路漫漫
    * modal还是要做二封的
    * vite配置方面和打包优化方面好久没做了，部署也没自动化，github的ci还没了解过，服务器现在还没着落......
    * MaybeRefDeep/DeepMaybeRef 相类似相关的类型，需要优化
    * layout 还只是最简单的布局，后续扩展也前路漫漫
    * component的插件生成文件路径有问题，导致在template里的自定义组件没有类型支持，是个问题
    * table 好久没碰了，里面的内容也是不少，以后组件里的vue能有setup就用setup，很香，代码也是很简洁
    * 后台的nestjs，一万年没碰过了，后续到了国际化和全面的部分，后台还需要设计设计，头大了
    * vue-tsc 没有错误报告，就算是项目的一个中期小目标了
* 今天就先这些吧，22:45了，今天是10点开始的，我也是坐了超长时间。扣了这么多字，有点像写日记了（正经人谁写日记啊？）